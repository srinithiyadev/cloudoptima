name: CI Pipeline
on: [push, pull_request]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Validate Python syntax
        run: |
          cd backend
          python -m py_compile app.py aws_api.py
          echo "✅ Python syntax valid"
      
      - name: Check requirements.txt
        run: |
          cd backend
          test -f requirements.txt && echo "✅ requirements.txt exists" || exit 1
          echo "Flask" > expected.txt
          grep -q "Flask" requirements.txt && echo "✅ Flask in requirements" || echo "⚠️ Flask not in requirements"

  # Remove build-docker job or keep it simple
  verify:
    runs-on: ubuntu-latest
    needs: validate
    steps:
      - name: Verify project structure
        run: |
          test -f backend/app.py && echo "✅ Backend app exists"
          test -f frontend/index.html && echo "✅ Frontend index exists"
          echo "✅ All checks passed"